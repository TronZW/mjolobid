<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .email-container {
            background-color: #ffffff;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #8b5cf6;
        }
        .logo {
            font-size: 28px;
            font-weight: bold;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .content {
            margin-bottom: 30px;
        }
        .notification-title {
            font-size: 20px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 15px;
        }
        .notification-message {
            font-size: 16px;
            color: #4b5563;
            margin-bottom: 20px;
            line-height: 1.8;
        }
        .event-details {
            background-color: #f9fafb;
            border-left: 4px solid #8b5cf6;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .event-details-item {
            margin: 8px 0;
            font-size: 15px;
            color: #374151;
        }
        .event-details-item strong {
            color: #1f2937;
        }
        .button {
            display: inline-block;
            padding: 12px 30px;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            color: #ffffff;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            margin: 20px 0;
            text-align: center;
        }
        .button:hover {
            opacity: 0.9;
        }
        .footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e5e7eb;
            text-align: center;
            font-size: 14px;
            color: #6b7280;
        }
        .footer a {
            color: #8b5cf6;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <div class="email-container">
        <div class="header">
            <div class="logo">MjoloBid</div>
            <p style="color: #6b7280; margin: 0;">Social Event Marketplace</p>
        </div>
        
        <div class="content">
            <h1 class="notification-title">{{ title }}</h1>
            
            {% if email_scenario == 'new_offer_posted' %}
                <div class="notification-message">
                    <p>Hi {{ recipient_name }},</p>
                    <p>Great news! <strong>{{ offer_creator_username }}</strong> just posted a new offer on MjoloBid that might interest you.</p>
                </div>
                
                <div class="event-details">
                    <div class="event-details-item"><strong>üìÖ Event Details:</strong></div>
                    <div class="event-details-item">‚Ä¢ <strong>Title:</strong> {{ offer.title }}</div>
                    {% if offer.event_category %}
                    <div class="event-details-item">‚Ä¢ <strong>Category:</strong> {{ offer.event_category.name }}</div>
                    {% endif %}
                    {% if offer.event_date %}
                    <div class="event-details-item">‚Ä¢ <strong>Date & Time:</strong> {{ offer.event_date|date:"F d, Y" }} at {{ offer.event_date|time:"g:i A" }}</div>
                    {% elif offer.available_date %}
                    <div class="event-details-item">‚Ä¢ <strong>Available Date:</strong> {{ offer.available_date|date:"F d, Y" }}</div>
                    {% endif %}
                    {% if offer.event_location %}
                    <div class="event-details-item">‚Ä¢ <strong>Location:</strong> {{ offer.event_location }}</div>
                    {% endif %}
                    <div class="event-details-item">‚Ä¢ <strong>Minimum Bid:</strong> ${{ offer.minimum_bid }}</div>
                </div>
                
                <div class="notification-message">
                    <p>{{ offer.description|truncatewords:30 }}</p>
                    <p>This offer is now live and accepting bids. Don't miss out on this opportunity to connect!</p>
                </div>
                
            {% elif email_scenario == 'new_bid_posted' %}
                <div class="notification-message">
                    <p>Hi {{ recipient_name }},</p>
                    <p>Exciting news! <strong>{{ bid_creator_username }}</strong> just posted a new bid on MjoloBid that you might be interested in.</p>
                </div>
                
                <div class="event-details">
                    <div class="event-details-item"><strong>üéâ Event Details:</strong></div>
                    <div class="event-details-item">‚Ä¢ <strong>Title:</strong> {{ bid.title }}</div>
                    {% if bid.event_category %}
                    <div class="event-details-item">‚Ä¢ <strong>Category:</strong> {{ bid.event_category.name }}</div>
                    {% endif %}
                    <div class="event-details-item">‚Ä¢ <strong>Date & Time:</strong> {{ bid.event_date|date:"F d, Y" }} at {{ bid.event_date|time:"g:i A" }}</div>
                    <div class="event-details-item">‚Ä¢ <strong>Location:</strong> {{ bid.event_location }}</div>
                    {% if bid.bid_type == 'PERKS' %}
                    <div class="event-details-item">‚Ä¢ <strong>Bid Type:</strong> <span style="color: #8b5cf6; font-weight: 600;">‚ú® Perks</span></div>
                    {% if bid.total_perk_value %}
                    <div class="event-details-item">‚Ä¢ <strong>Total Estimated Value:</strong> ${{ bid.total_perk_value }}</div>
                    {% endif %}
                    {% if bid.perks.all %}
                    <div class="event-details-item" style="margin-top: 10px;"><strong>üéÅ Perks Offered:</strong></div>
                    {% for perk in bid.perks.all %}
                    <div class="event-details-item" style="margin-left: 20px;">
                        ‚Ä¢ {{ perk.get_category_display }} {% if perk.quantity > 1 %}(x{{ perk.quantity }}){% endif %}
                        {% if perk.estimated_value %} - Estimated: ${{ perk.estimated_value }}{% endif %}
                        <br><span style="font-size: 13px; color: #6b7280; margin-left: 20px;">{{ perk.description|truncatewords:15 }}</span>
                    </div>
                    {% endfor %}
                    {% endif %}
                    {% else %}
                    <div class="event-details-item">‚Ä¢ <strong>Bid Amount:</strong> ${{ bid.bid_amount }}</div>
                    {% endif %}
                </div>
                
                <div class="notification-message">
                    <p>{{ bid.description|truncatewords:30 }}</p>
                    {% if bid.bid_type == 'PERKS' %}
                    <p>This bid includes exciting perks! If this event sounds interesting, you can accept it and start a conversation!</p>
                    {% else %}
                    <p>This bid is now open for acceptance. If this event sounds interesting, you can accept it and start a conversation!</p>
                    {% endif %}
                </div>
                
            {% elif email_scenario == 'bid_viewed' %}
                <div class="notification-message">
                    <p>Hi {{ recipient_name }},</p>
                    <p>Great news! <strong>{{ viewer_username }}</strong> just viewed your bid for "{{ bid.title }}".</p>
                    <p>This means your bid caught their attention! They're checking out the details of your event:</p>
                </div>
                
                <div class="event-details">
                    <div class="event-details-item">‚Ä¢ <strong>Event:</strong> {{ bid.title }}</div>
                    <div class="event-details-item">‚Ä¢ <strong>Date:</strong> {{ bid.event_date|date:"F d, Y" }} at {{ bid.event_date|time:"g:i A" }}</div>
                    <div class="event-details-item">‚Ä¢ <strong>Location:</strong> {{ bid.event_location }}</div>
                    {% if bid.bid_type == 'PERKS' %}
                    <div class="event-details-item">‚Ä¢ <strong>Your Bid Type:</strong> <span style="color: #8b5cf6; font-weight: 600;">‚ú® Perks</span></div>
                    {% if bid.total_perk_value %}
                    <div class="event-details-item">‚Ä¢ <strong>Total Estimated Value:</strong> ${{ bid.total_perk_value }}</div>
                    {% endif %}
                    {% else %}
                    <div class="event-details-item">‚Ä¢ <strong>Your Bid Amount:</strong> ${{ bid.bid_amount }}</div>
                    {% endif %}
                </div>
                
                <div class="notification-message">
                    <p>They might be interested in accepting your bid. Keep an eye on your notifications - if they accept, you'll be notified immediately!</p>
                </div>
                
            {% elif email_scenario == 'offer_viewed' %}
                <div class="notification-message">
                    <p>Hi {{ recipient_name }},</p>
                    <p>Exciting update! <strong>{{ viewer_username }}</strong> just viewed your offer for "{{ offer.title }}".</p>
                    <p>Your offer is getting attention! They're checking out:</p>
                </div>
                
                <div class="event-details">
                    <div class="event-details-item">‚Ä¢ <strong>Your Offer:</strong> {{ offer.title }}</div>
                    {% if offer.event_date %}
                    <div class="event-details-item">‚Ä¢ <strong>Event Date:</strong> {{ offer.event_date|date:"F d, Y" }} at {{ offer.event_date|time:"g:i A" }}</div>
                    {% elif offer.available_date %}
                    <div class="event-details-item">‚Ä¢ <strong>Available Date:</strong> {{ offer.available_date|date:"F d, Y" }}</div>
                    {% endif %}
                    {% if offer.event_location %}
                    <div class="event-details-item">‚Ä¢ <strong>Location:</strong> {{ offer.event_location }}</div>
                    {% endif %}
                    <div class="event-details-item">‚Ä¢ <strong>Minimum Bid:</strong> ${{ offer.minimum_bid }}</div>
                </div>
                
                <div class="notification-message">
                    <p>They might be preparing to place a bid. Stay tuned - you'll be notified as soon as they submit one!</p>
                </div>
                
            {% elif email_scenario == 'bid_accepted' %}
                <div class="notification-message">
                    <p>Hi {{ recipient_name }},</p>
                    <p>Congratulations! <strong>{{ accepter_username }}</strong> has accepted your bid for "{{ bid.title }}"!</p>
                </div>
                
                <div class="event-details">
                    <div class="event-details-item"><strong>üéä What This Means:</strong></div>
                    <div class="event-details-item">{{ accepter_username }} is interested in joining you for:</div>
                    <div class="event-details-item">‚Ä¢ <strong>Event:</strong> {{ bid.title }}</div>
                    <div class="event-details-item">‚Ä¢ <strong>Date:</strong> {{ bid.event_date|date:"F d, Y" }} at {{ bid.event_date|time:"g:i A" }}</div>
                    <div class="event-details-item">‚Ä¢ <strong>Location:</strong> {{ bid.event_location }}</div>
                    {% if bid.bid_type == 'PERKS' %}
                    <div class="event-details-item">‚Ä¢ <strong>Your Bid Type:</strong> <span style="color: #8b5cf6; font-weight: 600;">‚ú® Perks</span></div>
                    {% if bid.total_perk_value %}
                    <div class="event-details-item">‚Ä¢ <strong>Total Estimated Value:</strong> ${{ bid.total_perk_value }}</div>
                    {% endif %}
                    {% else %}
                    <div class="event-details-item">‚Ä¢ <strong>Your Bid Amount:</strong> ${{ bid.bid_amount }}</div>
                    {% endif %}
                </div>
                
                <div class="notification-message">
                    <p><strong>Next Steps:</strong></p>
                    <p>You can now review all acceptances for this bid and choose the companion you'd like to proceed with. If you have multiple acceptances, you'll be able to select your preferred match.</p>
                    <p>This is an exciting moment! Make sure to communicate clearly and plan your event together.</p>
                </div>
                
            {% elif email_scenario == 'offer_accepted' %}
                <div class="notification-message">
                    <p>Hi {{ recipient_name }},</p>
                    <p>Fantastic news! <strong>{{ offer_creator_username }}</strong> has selected your bid for their offer "{{ offer.title }}"!</p>
                </div>
                
                <div class="event-details">
                    <div class="event-details-item"><strong>üéä You're In!</strong></div>
                    <div class="event-details-item">{{ offer_creator_username }} chose you for:</div>
                    <div class="event-details-item">‚Ä¢ <strong>Offer:</strong> {{ offer.title }}</div>
                    {% if offer.event_date %}
                    <div class="event-details-item">‚Ä¢ <strong>Event Date:</strong> {{ offer.event_date|date:"F d, Y" }} at {{ offer.event_date|time:"g:i A" }}</div>
                    {% elif offer.available_date %}
                    <div class="event-details-item">‚Ä¢ <strong>Available Date:</strong> {{ offer.available_date|date:"F d, Y" }}</div>
                    {% endif %}
                    {% if offer.event_location %}
                    <div class="event-details-item">‚Ä¢ <strong>Location:</strong> {{ offer.event_location }}</div>
                    {% endif %}
                </div>
                
                <div class="notification-message">
                    <p><strong>What Happens Next:</strong></p>
                    <p>You can now start messaging <strong>{{ offer_creator_username }}</strong> directly to plan the details of your event together. Make sure to coordinate logistics, timing, and any special requirements.</p>
                    <p>Have a wonderful time planning your event!</p>
                </div>
                
            {% elif email_scenario == 'new_message' %}
                <div class="notification-message">
                    <p>Hi {{ recipient_name }},</p>
                    <p>You have a new message from <strong>{{ sender_username }}</strong>!</p>
                </div>
                
                <div class="event-details">
                    <div class="event-details-item"><strong>üí¨ Message Preview:</strong></div>
                    <div class="event-details-item" style="font-style: italic; color: #6b7280;">"{{ notification.message|truncatewords:20 }}"</div>
                    {% if conversation %}
                    <div class="event-details-item" style="margin-top: 10px;">This message is part of your conversation{% if conversation.bid %} about "{{ conversation.bid.title }}"{% elif conversation.offer %} about "{{ conversation.offer.title }}"{% endif %}.</div>
                    {% endif %}
                </div>
                
                <div class="notification-message">
                    <p>Don't keep them waiting! Reply now to continue the conversation and plan your event together.</p>
                </div>
                
            {% elif email_scenario == 'bid_on_offer' %}
                <div class="notification-message">
                    <p>Hi {{ recipient_name }},</p>
                    <p>Great news! Someone has placed a bid on your offer "{{ offer.title }}".</p>
                </div>
                
                <div class="event-details">
                    <div class="event-details-item">‚Ä¢ <strong>Your Offer:</strong> {{ offer.title }}</div>
                    <div class="event-details-item">‚Ä¢ <strong>Bid Details:</strong> {{ notification.message }}</div>
                </div>
                
                <div class="notification-message">
                    <p>Check out all the bids on your offer and choose the one that works best for you!</p>
                </div>
                
            {% else %}
                <div class="notification-message">
                    <p>Hi {{ recipient_name }},</p>
                    <p>{{ message|linebreaks }}</p>
                </div>
            {% endif %}
            
            {% if button_url %}
            <div style="text-align: center;">
                <a href="{{ button_url }}" class="button">{{ button_text }}</a>
            </div>
            {% endif %}
        </div>
        
        <div class="footer">
            <p>This is an automated notification from MjoloBid, your social event marketplace.</p>
            <p>You're receiving this because you have email notifications enabled in your account settings.</p>
            <p style="margin-top: 15px;">
                <a href="{{ site_url }}/notifications/settings/">Update notification preferences</a> | 
                <a href="{{ site_url }}/notifications/unsubscribe/">Unsubscribe from emails</a>
            </p>
            <p style="margin-top: 15px; font-size: 12px; color: #9ca3af;">
                MjoloBid - Social Event Marketplace<br>
                This email was sent to {{ user.email }}<br>
                &copy; 2024 MjoloBid. All rights reserved.
            </p>
        </div>
    </div>
</body>
</html>
